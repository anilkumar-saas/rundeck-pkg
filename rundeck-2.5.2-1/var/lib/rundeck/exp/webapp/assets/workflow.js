var RDWorkflow=Class.create({workflow:null,nodeSteppluginDescriptions:null,wfSteppluginDescriptions:null,initialize:function(a,b){this.workflow=a;Object.extend(this,b)},contextType:function(a){a=this.workflow[RDWorkflow.workflowIndexForContextId(a[0])];if("undefined"!=typeof a){if(a.exec)return"command";if(a.jobref)return"job";if(a.script)return"script";if(a.scriptfile)return"scriptfile";if(a.type)return a.nodeStep?"node-step-plugin plugin":null==a.nodeStep||a.nodeStep?"plugin":"workflow-step-plugin plugin"}return"console"},
renderContextStepNumber:function(a){"string"==typeof a&&(a=RDWorkflow.parseContextId(a));a=""+RDWorkflow.stepNumberForContextId(a[0]);return a+". "},renderContextString:function(a){"string"==typeof a&&(a=RDWorkflow.parseContextId(a));var b="";a=this.workflow[RDWorkflow.workflowIndexForContextId(a[0])];if("undefined"!=typeof a)a.description?b=a.description:a.exec?b="Command":a.jobref?b=(a.jobref.group?a.jobref.group+"/":"")+a.jobref.name:a.script?b="Script":a.scriptfile?b=a.scriptfile:a.type&&(b="Plugin "+
a.type,a.nodeStep&&this.nodeSteppluginDescriptions?b=this.nodeSteppluginDescriptions[a.type].title:!a.nodeStep&&this.wfSteppluginDescriptions&&(b=this.wfSteppluginDescriptions[a.type].title));else return"[?]";return b}});RDWorkflow.contextStringSeparator="/";RDWorkflow.parseContextId=function(a){if(null==a)return null;a=a.split(RDWorkflow.contextStringSeparator);for(var b=0,c=[],b=0;b<a.length;b++)c.push(a[b]);return c};
RDWorkflow.paramsForContextId=function(a){a=a.match(/^(\d+)(e)?(@(.+))?$/);return a[4]?a[4]:null};RDWorkflow.isErrorhandlerForContextId=function(a){return"e"==a.match(/^(\d+)(e)?(@.+)?$/)[2]?!0:!1};RDWorkflow.stepNumberForContextId=function(a){a=a.match(/^(\d+)(e)?(@.+)?$/);return a[1]?parseInt(a[1]):null};RDWorkflow.workflowIndexForContextId=function(a){a=RDWorkflow.stepNumberForContextId(a);return null!=a?a-1:null};
RDWorkflow.cleanContextId=function(a){a=RDWorkflow.parseContextId(a);for(var b=0;b<a.length;b++)a[b]=RDWorkflow.stepNumberForContextId(a[b]);return a.join(RDWorkflow.contextStringSeparator)};